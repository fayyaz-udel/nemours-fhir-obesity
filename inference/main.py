# import joblib
import os
from flask import Flask, jsonify, request
from flask_cors import CORS, cross_origin

from bmi_chart import plot_bmi_percentiles
from util import *

DEBUG = config["DEBUG"]

# from tensorflow import keras
app = Flask(__name__)
cors = CORS(app)

map_dict = read_mapping_dicts()

models = load_models()


pat_id = '1'




@app.route("/Patient")
@cross_origin()
def patient():
    print("Patient")
    dict = {
        "resourceType": "Bundle",
        "id": "440b5ed7-96bf-4df5-8f7c-553c4e42e3a5",
        "meta": {
            "lastUpdated": "2024-08-21T20:27:31.556-04:00"
        },
        "type": "searchset",
        "total": 1,
        "link": [
            {
                "relation": "self",
                "url": "https://launch.smarthealthit.org/v/r4/fhir/Patient?_id=d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
            }
        ],
        "entry": [
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c",
                "resource": {
                    "resourceType": "Patient",
                    "id": "d070e7dd-4d25-4c52-9fb2-78d232e1cf2c",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:02:15.884-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Generated by <a href=\"https://github.com/synthetichealth/synthea\">Synthea</a>.Version identifier: v2.4.0-100-g26a4b936\n .   Person seed: 7635372362995597509  Population seed: 1559319163074</div>"
                    },
                    "extension": [
                        {
                            "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-race",
                            "extension": [
                                {
                                    "url": "ombCategory",
                                    "valueCoding": {
                                        "system": "urn:oid:2.16.840.1.113883.6.238",
                                        "code": "2106-3",
                                        "display": "White"
                                    }
                                },
                                {
                                    "url": "text",
                                    "valueString": "White"
                                }
                            ]
                        },
                        {
                            "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity",
                            "extension": [
                                {
                                    "url": "ombCategory",
                                    "valueCoding": {
                                        "system": "urn:oid:2.16.840.1.113883.6.238",
                                        "code": "2186-5",
                                        "display": "Not Hispanic or Latino"
                                    }
                                },
                                {
                                    "url": "text",
                                    "valueString": "Not Hispanic or Latino"
                                }
                            ]
                        },
                        {
                            "url": "http://hl7.org/fhir/StructureDefinition/patient-mothersMaidenName",
                            "valueString": "Katina Upton"
                        },
                        {
                            "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-birthsex",
                            "valueCode": "F"
                        },
                        {
                            "url": "http://hl7.org/fhir/StructureDefinition/patient-birthPlace",
                            "valueAddress": {
                                "city": "Springfield",
                                "state": "Massachusetts",
                                "country": "US"
                            }
                        },
                        {
                            "url": "http://synthetichealth.github.io/synthea/disability-adjusted-life-years",
                            "valueDecimal": 0
                        },
                        {
                            "url": "http://synthetichealth.github.io/synthea/quality-adjusted-life-years",
                            "valueDecimal": 0
                        }
                    ],
                    "identifier": [
                        {
                            "system": "https://github.com/synthetichealth/synthea",
                            "value": "dd760206-6c4e-4e25-a799-f5c563e489a1"
                        },
                        {
                            "type": {
                                "coding": [
                                    {
                                        "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                                        "code": "MR",
                                        "display": "Medical Record Number"
                                    }
                                ],
                                "text": "Medical Record Number"
                            },
                            "system": "http://hospital.smarthealthit.org",
                            "value": "dd760206-6c4e-4e25-a799-f5c563e489a1"
                        },
                        {
                            "type": {
                                "coding": [
                                    {
                                        "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                                        "code": "SS",
                                        "display": "Social Security Number"
                                    }
                                ],
                                "text": "Social Security Number"
                            },
                            "system": "http://hl7.org/fhir/sid/us-ssn",
                            "value": "999-80-2088"
                        }
                    ],
                    "name": [
                        {
                            "use": "official",
                            "family": "Doe",
                            "given": [
                                "John"
                            ]
                        }
                    ],
                    "telecom": [
                        {
                            "system": "phone",
                            "value": "555-243-3287",
                            "use": "home"
                        }
                    ],
                    "gender": "female",
                    "birthDate": "2019-04-09",
                    "address": [
                        {
                            "extension": [
                                {
                                    "url": "http://hl7.org/fhir/StructureDefinition/geolocation",
                                    "extension": [
                                        {
                                            "url": "latitude",
                                            "valueDecimal": 42.388285
                                        },
                                        {
                                            "url": "longitude",
                                            "valueDecimal": -71.969865
                                        }
                                    ]
                                }
                            ],
                            "line": [
                                "1017 Wolf Glen"
                            ],
                            "city": "Rutland",
                            "state": "Massachusetts",
                            "postalCode": "01543",
                            "country": "US"
                        }
                    ],
                    "maritalStatus": {
                        "coding": [
                            {
                                "system": "http://terminology.hl7.org/CodeSystem/v3-MaritalStatus",
                                "code": "S",
                                "display": "Never Married"
                            }
                        ],
                        "text": "Never Married"
                    },
                    "multipleBirthBoolean": False,
                    "communication": [
                        {
                            "language": {
                                "coding": [
                                    {
                                        "system": "urn:ietf:bcp:47",
                                        "code": "en-US",
                                        "display": "English"
                                    }
                                ],
                                "text": "English"
                            }
                        }
                    ]
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            }
        ]
    }

    return jsonify(dict)


@app.route("/MedicationRequest")
@cross_origin()
def medication():
    print("Medication")
    dict = {
        "resourceType": "Bundle",
        "id": "f834019c-86ac-4464-b944-913b122c7212",
        "meta": {
            "lastUpdated": "2024-08-21T20:38:01.975-04:00"
        },
        "type": "searchset",
        "total": 1,
        "link": [
            {
                "relation": "self",
                "url": "https://launch.smarthealthit.org/v/r4/fhir/MedicationRequest?patient=d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
            }
        ],
        "entry": [
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/MedicationRequest/2fe91fad-f5fa-48a3-91b4-ee326e562d95",
                "resource": {
                    "resourceType": "MedicationRequest",
                    "id": "2fe91fad-f5fa-48a3-91b4-ee326e562d95",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:02:48.057-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "stopped",
                    "intent": "order",
                    "medicationCodeableConcept": {
                        "coding": [
                            {
                                "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
                                "code": "562251",
                                "display": "Amoxicillin 250 MG / Clavulanate 125 MG Oral Tablet"
                            }
                        ],
                        "text": "Amoxicillin 250 MG / Clavulanate 125 MG Oral Tablet"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/a3cac1fb-ac42-431c-9ca6-d3d102053a33"
                    },
                    "authoredOn": "2020-11-14T14:49:19+00:00",
                    "requester": {
                        "reference": "Practitioner/37881086-7b05-4b18-a279-08e331f50e9b"
                    },
                    "reasonReference": [
                        {
                            "reference": "Condition/badb1475-4eeb-4535-83d0-373a8ae938be"
                        }
                    ]
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            }
        ]
    }
    return jsonify(dict)


@app.route("/Condition")
@cross_origin()
def condition():
    print("Condition")
    dict = {
    "resourceType": "Bundle",
    "id": "7d40762b-1a54-497b-91a0-6be78c65e666",
    "meta": {
        "lastUpdated": "2024-08-21T20:45:01.793-04:00"
    },
    "type": "searchset",
    "total": 1,
    "link": [
        {
            "relation": "self",
            "url": "https://launch.smarthealthit.org/v/r4/fhir/Condition?patient=d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
        }
    ],
    "entry": [
        {
            "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Condition/badb1475-4eeb-4535-83d0-373a8ae938be",
            "resource": {
                "resourceType": "Condition",
                "id": "badb1475-4eeb-4535-83d0-373a8ae938be",
                "meta": {
                    "versionId": "4",
                    "lastUpdated": "2021-04-06T03:02:48.029-04:00",
                    "tag": [
                        {
                            "system": "https://smarthealthit.org/tags",
                            "code": "synthea-5-2019"
                        }
                    ]
                },
                "clinicalStatus": {
                    "coding": [
                        {
                            "system": "http://terminology.hl7.org/CodeSystem/condition-clinical",
                            "code": "resolved"
                        }
                    ]
                },
                "verificationStatus": {
                    "coding": [
                        {
                            "system": "http://terminology.hl7.org/CodeSystem/condition-ver-status",
                            "code": "confirmed"
                        }
                    ]
                },
                "code": {
                    "coding": [
                        {
                            "system": "http://snomed.info/sct",
                            "code": "444814009",
                            "display": "Viral sinusitis (disorder)"
                        }
                    ],
                    "text": "Viral sinusitis (disorder)"
                },
                "subject": {
                    "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                },
                "encounter": {
                    "reference": "Encounter/a3cac1fb-ac42-431c-9ca6-d3d102053a33"
                },
                "onsetDateTime": "2020-11-14T14:49:19+00:00",
                "abatementDateTime": "2020-12-05T14:49:19+00:00",
                "recordedDate": "2020-11-14T14:49:19+00:00"
            },
            "search": {
                "mode": "match"
            },
            "response": {
                "status": "200 OK",
                "etag": "W/\"4\""
            }
        }
    ]
}
    return jsonify(dict)


@app.route("/Observation")
@cross_origin()
def observation():
    print("Observation")
    dict = {
        "resourceType": "Bundle",
        "id": "9f439cb7-6d84-4d1c-bac5-795bcbbc987d",
        "meta": {
            "lastUpdated": "2024-08-21T20:40:19.974-04:00"
        },
        "type": "searchset",
        "total": 41,
        "link": [
            {
                "relation": "self",
                "url": "https://launch.smarthealthit.org/v/r4/fhir/Observation?patient=d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
            }
        ],
        "entry": [
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/fc2b7b9c-3d6c-406e-904b-2a91e759abaa",
                "resource": {
                    "resourceType": "Observation",
                    "id": "fc2b7b9c-3d6c-406e-904b-2a91e759abaa",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:14:08.833-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72514-3",
                                "display": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                            }
                        ],
                        "text": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/af2b813b-0a24-41fe-88c7-0f736755d11e"
                    },
                    "effectiveDateTime": "2020-09-17T14:49:19+00:00",
                    "issued": "2020-09-17T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 2.306726229247172,
                        "unit": "{score}",
                        "system": "http://unitsofmeasure.org",
                        "code": "{score}"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/ff70c213-8cb4-4c26-9a84-e1e8f786b4b4",
                "resource": {
                    "resourceType": "Observation",
                    "id": "ff70c213-8cb4-4c26-9a84-e1e8f786b4b4",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:14:07.135-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "survey",
                                    "display": "survey"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72166-2",
                                "display": "Tobacco smoking status NHIS"
                            }
                        ],
                        "text": "Tobacco smoking status NHIS"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/6072ca93-8ed5-444b-a85f-158c6823a129"
                    },
                    "effectiveDateTime": "2021-03-18T14:49:19+00:00",
                    "issued": "2021-03-18T14:49:19.202+00:00",
                    "valueCodeableConcept": {
                        "coding": [
                            {
                                "system": "http://snomed.info/sct",
                                "code": "266919005",
                                "display": "Never smoker"
                            }
                        ],
                        "text": "Never smoker"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/e7377e55-374d-4650-9ca2-c15e18c5b497",
                "resource": {
                    "resourceType": "Observation",
                    "id": "e7377e55-374d-4650-9ca2-c15e18c5b497",
                    "meta": {
                        "versionId": "6",
                        "lastUpdated": "2021-04-06T03:13:27.226-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "29463-7",
                                "display": "Body Weight"
                            }
                        ],
                        "text": "Body Weight"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/44031197-7618-46b6-9996-17ccb41e970a"
                    },
                    "effectiveDateTime": "2020-12-17T14:49:19+00:00",
                    "issued": "2020-12-17T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 7.6341278745623296,
                        "unit": "kg",
                        "system": "http://unitsofmeasure.org",
                        "code": "kg"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"6\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/96da0d2a-9cbe-4c01-a6c0-14f3fa5b13c2",
                "resource": {
                    "resourceType": "Observation",
                    "id": "96da0d2a-9cbe-4c01-a6c0-14f3fa5b13c2",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:13:25.884-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "8302-2",
                                "display": "Body Height"
                            }
                        ],
                        "text": "Body Height"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/44031197-7618-46b6-9996-17ccb41e970a"
                    },
                    "effectiveDateTime": "2022-12-17T14:49:19+00:00",
                    "issued": "2022-12-17T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 69.33556892047363,
                        "unit": "cm",
                        "system": "http://unitsofmeasure.org",
                        "code": "cm"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/c0e47314-d666-4bfe-8bff-c9610fec2ec0",
                "resource": {
                    "resourceType": "Observation",
                    "id": "c0e47314-d666-4bfe-8bff-c9610fec2ec0",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:13:22.463-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "survey",
                                    "display": "survey"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72166-2",
                                "display": "Tobacco smoking status NHIS"
                            }
                        ],
                        "text": "Tobacco smoking status NHIS"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/af2b813b-0a24-41fe-88c7-0f736755d11e"
                    },
                    "effectiveDateTime": "2020-09-17T14:49:19+00:00",
                    "issued": "2020-09-17T14:49:19.202+00:00",
                    "valueCodeableConcept": {
                        "coding": [
                            {
                                "system": "http://snomed.info/sct",
                                "code": "266919005",
                                "display": "Never smoker"
                            }
                        ],
                        "text": "Never smoker"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/7e31a8ae-afc3-46b9-8f10-6b764ebfad3c",
                "resource": {
                    "resourceType": "Observation",
                    "id": "7e31a8ae-afc3-46b9-8f10-6b764ebfad3c",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:13:08.615-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "55284-4",
                                "display": "Blood Pressure"
                            }
                        ],
                        "text": "Blood Pressure"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "component": [
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8462-4",
                                        "display": "Diastolic Blood Pressure"
                                    }
                                ],
                                "text": "Diastolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 84.32780413902088,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        },
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8480-6",
                                        "display": "Systolic Blood Pressure"
                                    }
                                ],
                                "text": "Systolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 126.9676726926251,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        }
                    ]
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/644c97d1-9336-42b0-a2bb-944fb3cb43cb",
                "resource": {
                    "resourceType": "Observation",
                    "id": "644c97d1-9336-42b0-a2bb-944fb3cb43cb",
                    "meta": {
                        "versionId": "8",
                        "lastUpdated": "2021-04-06T03:12:59.281-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "29463-7",
                                "display": "Body Weight"
                            }
                        ],
                        "text": "Body Weight"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/b19baf83-5be4-425f-b400-48274b1c4a04"
                    },
                    "effectiveDateTime": "2020-07-16T14:49:19+00:00",
                    "issued": "2020-07-16T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 4.72748203851151,
                        "unit": "kg",
                        "system": "http://unitsofmeasure.org",
                        "code": "kg"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"8\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/31a3206e-0c94-495f-acc5-bb96aef13be7",
                "resource": {
                    "resourceType": "Observation",
                    "id": "31a3206e-0c94-495f-acc5-bb96aef13be7",
                    "meta": {
                        "versionId": "6",
                        "lastUpdated": "2021-04-06T03:12:58.065-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "29463-7",
                                "display": "Body Weight"
                            }
                        ],
                        "text": "Body Weight"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/af2b813b-0a24-41fe-88c7-0f736755d11e"
                    },
                    "effectiveDateTime": "2020-09-17T14:49:19+00:00",
                    "issued": "2020-09-17T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 6.360841929791593,
                        "unit": "kg",
                        "system": "http://unitsofmeasure.org",
                        "code": "kg"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"6\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/2de88dd1-4976-4d15-8f6a-00ab79225260",
                "resource": {
                    "resourceType": "Observation",
                    "id": "2de88dd1-4976-4d15-8f6a-00ab79225260",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:12:53.206-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72514-3",
                                "display": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                            }
                        ],
                        "text": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 0.30404554312362997,
                        "unit": "{score}",
                        "system": "http://unitsofmeasure.org",
                        "code": "{score}"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/e8403722-ebe6-451d-8893-cbf13f176027",
                "resource": {
                    "resourceType": "Observation",
                    "id": "e8403722-ebe6-451d-8893-cbf13f176027",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:12:48.343-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "55284-4",
                                "display": "Blood Pressure"
                            }
                        ],
                        "text": "Blood Pressure"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/af2b813b-0a24-41fe-88c7-0f736755d11e"
                    },
                    "effectiveDateTime": "2020-09-17T14:49:19+00:00",
                    "issued": "2020-09-17T14:49:19.202+00:00",
                    "component": [
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8462-4",
                                        "display": "Diastolic Blood Pressure"
                                    }
                                ],
                                "text": "Diastolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 84.31941151559703,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        },
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8480-6",
                                        "display": "Systolic Blood Pressure"
                                    }
                                ],
                                "text": "Systolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 135.03318800629242,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        }
                    ]
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/4be2df55-81a5-457d-85f5-239fa5aac725",
                "resource": {
                    "resourceType": "Observation",
                    "id": "4be2df55-81a5-457d-85f5-239fa5aac725",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:12:45.480-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72514-3",
                                "display": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                            }
                        ],
                        "text": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/859b90db-f7ab-4a05-8f04-96d6b36729b0"
                    },
                    "effectiveDateTime": "2020-05-14T14:49:19+00:00",
                    "issued": "2020-05-14T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 1.3303551645395322,
                        "unit": "{score}",
                        "system": "http://unitsofmeasure.org",
                        "code": "{score}"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/809978b7-eb90-493f-a095-b663afd6c165",
                "resource": {
                    "resourceType": "Observation",
                    "id": "809978b7-eb90-493f-a095-b663afd6c165",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:12:28.470-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "survey",
                                    "display": "survey"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72166-2",
                                "display": "Tobacco smoking status NHIS"
                            }
                        ],
                        "text": "Tobacco smoking status NHIS"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueCodeableConcept": {
                        "coding": [
                            {
                                "system": "http://snomed.info/sct",
                                "code": "266919005",
                                "display": "Never smoker"
                            }
                        ],
                        "text": "Never smoker"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/8713d38c-3614-4532-92dc-400b92344d9e",
                "resource": {
                    "resourceType": "Observation",
                    "id": "8713d38c-3614-4532-92dc-400b92344d9e",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:11:56.753-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "survey",
                                    "display": "survey"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72166-2",
                                "display": "Tobacco smoking status NHIS"
                            }
                        ],
                        "text": "Tobacco smoking status NHIS"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/b19baf83-5be4-425f-b400-48274b1c4a04"
                    },
                    "effectiveDateTime": "2020-07-16T14:49:19+00:00",
                    "issued": "2020-07-16T14:49:19.202+00:00",
                    "valueCodeableConcept": {
                        "coding": [
                            {
                                "system": "http://snomed.info/sct",
                                "code": "266919005",
                                "display": "Never smoker"
                            }
                        ],
                        "text": "Never smoker"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/ba21a5d7-d355-47e1-a8ea-3d0dd4617819",
                "resource": {
                    "resourceType": "Observation",
                    "id": "ba21a5d7-d355-47e1-a8ea-3d0dd4617819",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:11:37.824-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "8302-2",
                                "display": "Body Height"
                            }
                        ],
                        "text": "Body Height"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/b19baf83-5be4-425f-b400-48274b1c4a04"
                    },
                    "effectiveDateTime": "2020-07-16T14:49:19+00:00",
                    "issued": "2020-07-16T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 58.222802650813804,
                        "unit": "cm",
                        "system": "http://unitsofmeasure.org",
                        "code": "cm"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/1a15d028-dacc-4f00-b9c0-9c7e1e1d64f9",
                "resource": {
                    "resourceType": "Observation",
                    "id": "1a15d028-dacc-4f00-b9c0-9c7e1e1d64f9",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:11:37.424-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "survey",
                                    "display": "survey"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72166-2",
                                "display": "Tobacco smoking status NHIS"
                            }
                        ],
                        "text": "Tobacco smoking status NHIS"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/44031197-7618-46b6-9996-17ccb41e970a"
                    },
                    "effectiveDateTime": "2020-12-17T14:49:19+00:00",
                    "issued": "2020-12-17T14:49:19.202+00:00",
                    "valueCodeableConcept": {
                        "coding": [
                            {
                                "system": "http://snomed.info/sct",
                                "code": "266919005",
                                "display": "Never smoker"
                            }
                        ],
                        "text": "Never smoker"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/a6f1bac5-68b5-4621-acdc-d93e2f9ab75d",
                "resource": {
                    "resourceType": "Observation",
                    "id": "a6f1bac5-68b5-4621-acdc-d93e2f9ab75d",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:10:42.095-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "55284-4",
                                "display": "Blood Pressure"
                            }
                        ],
                        "text": "Blood Pressure"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/b19baf83-5be4-425f-b400-48274b1c4a04"
                    },
                    "effectiveDateTime": "2020-07-16T14:49:19+00:00",
                    "issued": "2020-07-16T14:49:19.202+00:00",
                    "component": [
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8462-4",
                                        "display": "Diastolic Blood Pressure"
                                    }
                                ],
                                "text": "Diastolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 85.51048804140906,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        },
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8480-6",
                                        "display": "Systolic Blood Pressure"
                                    }
                                ],
                                "text": "Systolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 136.36409699717154,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        }
                    ]
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/ac7a6662-dbe6-47ca-9975-2c9a7b8a80ee",
                "resource": {
                    "resourceType": "Observation",
                    "id": "ac7a6662-dbe6-47ca-9975-2c9a7b8a80ee",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:10:10.927-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "8302-2",
                                "display": "Body Height"
                            }
                        ],
                        "text": "Body Height"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2022-04-09T14:49:19+00:00",
                    "issued": "2022-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 161.81258324976619,
                        "unit": "cm",
                        "system": "http://unitsofmeasure.org",
                        "code": "cm"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/ea384f4e-e264-42ea-afe1-f667b2995838",
                "resource": {
                    "resourceType": "Observation",
                    "id": "ea384f4e-e264-42ea-afe1-f667b2995838",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:09:50.193-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72514-3",
                                "display": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                            }
                        ],
                        "text": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/44031197-7618-46b6-9996-17ccb41e970a"
                    },
                    "effectiveDateTime": "2020-12-17T14:49:19+00:00",
                    "issued": "2020-12-17T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 1.9626942740851194,
                        "unit": "{score}",
                        "system": "http://unitsofmeasure.org",
                        "code": "{score}"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/1d0742e8-74f1-4134-846c-6c3627e91d8a",
                "resource": {
                    "resourceType": "Observation",
                    "id": "1d0742e8-74f1-4134-846c-6c3627e91d8a",
                    "meta": {
                        "versionId": "6",
                        "lastUpdated": "2021-04-06T03:09:49.897-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "29463-7",
                                "display": "Body Weight"
                            }
                        ],
                        "text": "Body Weight"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2022-04-09T14:49:19+00:00",
                    "issued": "2022-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 40.3901322837394874,
                        "unit": "kg",
                        "system": "http://unitsofmeasure.org",
                        "code": "kg"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"6\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/d6496319-8316-4b1b-8629-de56713b52e6",
                "resource": {
                    "resourceType": "Observation",
                    "id": "d6496319-8316-4b1b-8629-de56713b52e6",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:09:38.842-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "survey",
                                    "display": "survey"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72166-2",
                                "display": "Tobacco smoking status NHIS"
                            }
                        ],
                        "text": "Tobacco smoking status NHIS"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/859b90db-f7ab-4a05-8f04-96d6b36729b0"
                    },
                    "effectiveDateTime": "2020-05-14T14:49:19+00:00",
                    "issued": "2020-05-14T14:49:19.202+00:00",
                    "valueCodeableConcept": {
                        "coding": [
                            {
                                "system": "http://snomed.info/sct",
                                "code": "266919005",
                                "display": "Never smoker"
                            }
                        ],
                        "text": "Never smoker"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/fd812f38-808d-450e-8dc9-3aa2034de884",
                "resource": {
                    "resourceType": "Observation",
                    "id": "fd812f38-808d-450e-8dc9-3aa2034de884",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:09:34.581-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "55284-4",
                                "display": "Blood Pressure"
                            }
                        ],
                        "text": "Blood Pressure"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/859b90db-f7ab-4a05-8f04-96d6b36729b0"
                    },
                    "effectiveDateTime": "2020-05-14T14:49:19+00:00",
                    "issued": "2020-05-14T14:49:19.202+00:00",
                    "component": [
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8462-4",
                                        "display": "Diastolic Blood Pressure"
                                    }
                                ],
                                "text": "Diastolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 72.16946968594506,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        },
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8480-6",
                                        "display": "Systolic Blood Pressure"
                                    }
                                ],
                                "text": "Systolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 135.35297750542674,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        }
                    ]
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/3a694799-efd4-40b3-a109-a3d18452e06f",
                "resource": {
                    "resourceType": "Observation",
                    "id": "3a694799-efd4-40b3-a109-a3d18452e06f",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:09:16.667-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "8302-2",
                                "display": "Body Height"
                            }
                        ],
                        "text": "Body Height"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/6072ca93-8ed5-444b-a85f-158c6823a129"
                    },
                    "effectiveDateTime": "2021-03-18T14:49:19+00:00",
                    "issued": "2021-03-18T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 73.33790154710415,
                        "unit": "cm",
                        "system": "http://unitsofmeasure.org",
                        "code": "cm"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/71809402-8204-49d9-afa7-407327fb0c5d",
                "resource": {
                    "resourceType": "Observation",
                    "id": "71809402-8204-49d9-afa7-407327fb0c5d",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:09:06.159-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "8302-2",
                                "display": "Body Height"
                            }
                        ],
                        "text": "Body Height"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/859b90db-f7ab-4a05-8f04-96d6b36729b0"
                    },
                    "effectiveDateTime": "2020-05-14T14:49:19+00:00",
                    "issued": "2020-05-14T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 51.81258324976619,
                        "unit": "cm",
                        "system": "http://unitsofmeasure.org",
                        "code": "cm"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/42957267-995a-4bc1-8157-9ff20531004e",
                "resource": {
                    "resourceType": "Observation",
                    "id": "42957267-995a-4bc1-8157-9ff20531004e",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:07:42.853-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72514-3",
                                "display": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                            }
                        ],
                        "text": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/6072ca93-8ed5-444b-a85f-158c6823a129"
                    },
                    "effectiveDateTime": "2021-03-18T14:49:19+00:00",
                    "issued": "2021-03-18T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 0.6138681875048007,
                        "unit": "{score}",
                        "system": "http://unitsofmeasure.org",
                        "code": "{score}"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/d1085bdd-f12d-430e-876c-a5a00dfb3f20",
                "resource": {
                    "resourceType": "Observation",
                    "id": "d1085bdd-f12d-430e-876c-a5a00dfb3f20",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:06:20.413-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "8302-2",
                                "display": "Body Height"
                            }
                        ],
                        "text": "Body Height"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/af2b813b-0a24-41fe-88c7-0f736755d11e"
                    },
                    "effectiveDateTime": "2020-09-17T14:49:19+00:00",
                    "issued": "2020-09-17T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 64.54225254509429,
                        "unit": "cm",
                        "system": "http://unitsofmeasure.org",
                        "code": "cm"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/74cf3d32-0839-4349-a4c5-c9085c3fd0bf",
                "resource": {
                    "resourceType": "Observation",
                    "id": "74cf3d32-0839-4349-a4c5-c9085c3fd0bf",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:05:05.364-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "72514-3",
                                "display": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                            }
                        ],
                        "text": "Pain severity - 0-10 verbal numeric rating [Score] - Reported"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/b19baf83-5be4-425f-b400-48274b1c4a04"
                    },
                    "effectiveDateTime": "2020-07-16T14:49:19+00:00",
                    "issued": "2020-07-16T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 3.921434778149819,
                        "unit": "{score}",
                        "system": "http://unitsofmeasure.org",
                        "code": "{score}"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/595850cd-55dd-4f60-a6d2-543e82dab12a",
                "resource": {
                    "resourceType": "Observation",
                    "id": "595850cd-55dd-4f60-a6d2-543e82dab12a",
                    "meta": {
                        "versionId": "7",
                        "lastUpdated": "2021-04-06T03:05:02.312-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "29463-7",
                                "display": "Body Weight"
                            }
                        ],
                        "text": "Body Weight"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/6072ca93-8ed5-444b-a85f-158c6823a129"
                    },
                    "effectiveDateTime": "2021-03-18T14:49:19+00:00",
                    "issued": "2021-03-18T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 8.631643461205897,
                        "unit": "kg",
                        "system": "http://unitsofmeasure.org",
                        "code": "kg"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"7\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/f5b7f4d9-7677-4096-aa99-7ef9ef709ef1",
                "resource": {
                    "resourceType": "Observation",
                    "id": "f5b7f4d9-7677-4096-aa99-7ef9ef709ef1",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:04:34.954-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "55284-4",
                                "display": "Blood Pressure"
                            }
                        ],
                        "text": "Blood Pressure"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/44031197-7618-46b6-9996-17ccb41e970a"
                    },
                    "effectiveDateTime": "2020-12-17T14:49:19+00:00",
                    "issued": "2020-12-17T14:49:19.202+00:00",
                    "component": [
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8462-4",
                                        "display": "Diastolic Blood Pressure"
                                    }
                                ],
                                "text": "Diastolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 87.5247270746626,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        },
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8480-6",
                                        "display": "Systolic Blood Pressure"
                                    }
                                ],
                                "text": "Systolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 131.4402417177808,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        }
                    ]
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/0cde577c-ba90-4616-b61a-2c903c9889cb",
                "resource": {
                    "resourceType": "Observation",
                    "id": "0cde577c-ba90-4616-b61a-2c903c9889cb",
                    "meta": {
                        "versionId": "7",
                        "lastUpdated": "2021-04-06T03:03:53.989-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "29463-7",
                                "display": "Body Weight"
                            }
                        ],
                        "text": "Body Weight"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/859b90db-f7ab-4a05-8f04-96d6b36729b0"
                    },
                    "effectiveDateTime": "2020-05-14T14:49:19+00:00",
                    "issued": "2020-05-14T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 3.3901322837394874,
                        "unit": "kg",
                        "system": "http://unitsofmeasure.org",
                        "code": "kg"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"7\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/73757794-9d60-49a2-bbd0-66b081e1b8b5",
                "resource": {
                    "resourceType": "Observation",
                    "id": "73757794-9d60-49a2-bbd0-66b081e1b8b5",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:34.305-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "vital-signs",
                                    "display": "vital-signs"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "55284-4",
                                "display": "Blood Pressure"
                            }
                        ],
                        "text": "Blood Pressure"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/6072ca93-8ed5-444b-a85f-158c6823a129"
                    },
                    "effectiveDateTime": "2021-03-18T14:49:19+00:00",
                    "issued": "2021-03-18T14:49:19.202+00:00",
                    "component": [
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8462-4",
                                        "display": "Diastolic Blood Pressure"
                                    }
                                ],
                                "text": "Diastolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 85.4509278190675,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        },
                        {
                            "code": {
                                "coding": [
                                    {
                                        "system": "http://loinc.org",
                                        "code": "8480-6",
                                        "display": "Systolic Blood Pressure"
                                    }
                                ],
                                "text": "Systolic Blood Pressure"
                            },
                            "valueQuantity": {
                                "value": 118.50735146589886,
                                "unit": "mm[Hg]",
                                "system": "http://unitsofmeasure.org",
                                "code": "mm[Hg]"
                            }
                        }
                    ]
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/f543a0fc-9f67-4639-bd13-9ba625695f96",
                "resource": {
                    "resourceType": "Observation",
                    "id": "f543a0fc-9f67-4639-bd13-9ba625695f96",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.594-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "32623-1",
                                "display": "Platelet mean volume [Entitic volume] in Blood by Automated count"
                            }
                        ],
                        "text": "Platelet mean volume [Entitic volume] in Blood by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 11.80735070132,
                        "unit": "fL",
                        "system": "http://unitsofmeasure.org",
                        "code": "fL"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/b2c73d83-36e5-4bed-937a-429c889842cc",
                "resource": {
                    "resourceType": "Observation",
                    "id": "b2c73d83-36e5-4bed-937a-429c889842cc",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.554-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "32207-3",
                                "display": "Platelet distribution width [Entitic volume] in Blood by Automated count"
                            }
                        ],
                        "text": "Platelet distribution width [Entitic volume] in Blood by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 161.63091273434335,
                        "unit": "fL",
                        "system": "http://unitsofmeasure.org",
                        "code": "fL"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/5cba4f2e-a410-4011-a939-3b5e665ffc07",
                "resource": {
                    "resourceType": "Observation",
                    "id": "5cba4f2e-a410-4011-a939-3b5e665ffc07",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.523-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "777-3",
                                "display": "Platelets [#/volume] in Blood by Automated count"
                            }
                        ],
                        "text": "Platelets [#/volume] in Blood by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 315.73084289524274,
                        "unit": "10*3/uL",
                        "system": "http://unitsofmeasure.org",
                        "code": "10*3/uL"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/23ea5bfa-e3b3-43b3-936f-85ef3c25fcd3",
                "resource": {
                    "resourceType": "Observation",
                    "id": "23ea5bfa-e3b3-43b3-936f-85ef3c25fcd3",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.487-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "21000-5",
                                "display": "Erythrocyte distribution width [Entitic volume] by Automated count"
                            }
                        ],
                        "text": "Erythrocyte distribution width [Entitic volume] by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 41.83037940265638,
                        "unit": "fL",
                        "system": "http://unitsofmeasure.org",
                        "code": "fL"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/9f2d4294-2f45-44a6-a4be-c3170b715469",
                "resource": {
                    "resourceType": "Observation",
                    "id": "9f2d4294-2f45-44a6-a4be-c3170b715469",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.445-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "786-4",
                                "display": "MCHC [Mass/volume] by Automated count"
                            }
                        ],
                        "text": "MCHC [Mass/volume] by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 34.742299325477184,
                        "unit": "g/dL",
                        "system": "http://unitsofmeasure.org",
                        "code": "g/dL"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/33348091-d9e4-4f7b-b9c4-3d0f941bcc52",
                "resource": {
                    "resourceType": "Observation",
                    "id": "33348091-d9e4-4f7b-b9c4-3d0f941bcc52",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.384-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "785-6",
                                "display": "MCH [Entitic mass] by Automated count"
                            }
                        ],
                        "text": "MCH [Entitic mass] by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 31.4015454045118,
                        "unit": "pg",
                        "system": "http://unitsofmeasure.org",
                        "code": "pg"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/b34f6b2a-99e4-440d-9b3e-9a6a2f9dc100",
                "resource": {
                    "resourceType": "Observation",
                    "id": "b34f6b2a-99e4-440d-9b3e-9a6a2f9dc100",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.338-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "787-2",
                                "display": "MCV [Entitic volume] by Automated count"
                            }
                        ],
                        "text": "MCV [Entitic volume] by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 90.49900479875598,
                        "unit": "fL",
                        "system": "http://unitsofmeasure.org",
                        "code": "fL"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/d3deca3b-0901-4728-a7c3-84f311b15586",
                "resource": {
                    "resourceType": "Observation",
                    "id": "d3deca3b-0901-4728-a7c3-84f311b15586",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.297-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "4544-3",
                                "display": "Hematocrit [Volume Fraction] of Blood by Automated count"
                            }
                        ],
                        "text": "Hematocrit [Volume Fraction] of Blood by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 47.9346705888737,
                        "unit": "%",
                        "system": "http://unitsofmeasure.org",
                        "code": "%"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/4bb6d861-8da9-48af-ae2e-eda5d4e2718a",
                "resource": {
                    "resourceType": "Observation",
                    "id": "4bb6d861-8da9-48af-ae2e-eda5d4e2718a",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.261-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "718-7",
                                "display": "Hemoglobin [Mass/volume] in Blood"
                            }
                        ],
                        "text": "Hemoglobin [Mass/volume] in Blood"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 13.473847022404218,
                        "unit": "g/dL",
                        "system": "http://unitsofmeasure.org",
                        "code": "g/dL"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/a964c3c8-b7ae-463c-bc09-c28f2734ec26",
                "resource": {
                    "resourceType": "Observation",
                    "id": "a964c3c8-b7ae-463c-bc09-c28f2734ec26",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.233-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "789-8",
                                "display": "Erythrocytes [#/volume] in Blood by Automated count"
                            }
                        ],
                        "text": "Erythrocytes [#/volume] in Blood by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 3.9205420322447178,
                        "unit": "10*6/uL",
                        "system": "http://unitsofmeasure.org",
                        "code": "10*6/uL"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            },
            {
                "fullUrl": "https://launch.smarthealthit.org/v/r4/fhir/Observation/e095d2dd-b277-4ab7-9f40-5b7ac72597e9",
                "resource": {
                    "resourceType": "Observation",
                    "id": "e095d2dd-b277-4ab7-9f40-5b7ac72597e9",
                    "meta": {
                        "versionId": "4",
                        "lastUpdated": "2021-04-06T03:03:30.184-04:00",
                        "tag": [
                            {
                                "system": "https://smarthealthit.org/tags",
                                "code": "synthea-5-2019"
                            }
                        ]
                    },
                    "status": "final",
                    "category": [
                        {
                            "coding": [
                                {
                                    "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                                    "code": "laboratory",
                                    "display": "laboratory"
                                }
                            ]
                        }
                    ],
                    "code": {
                        "coding": [
                            {
                                "system": "http://loinc.org",
                                "code": "6690-2",
                                "display": "Leukocytes [#/volume] in Blood by Automated count"
                            }
                        ],
                        "text": "Leukocytes [#/volume] in Blood by Automated count"
                    },
                    "subject": {
                        "reference": "Patient/d070e7dd-4d25-4c52-9fb2-78d232e1cf2c"
                    },
                    "encounter": {
                        "reference": "Encounter/1e9326a5-2d71-4998-853a-b51dca5a9feb"
                    },
                    "effectiveDateTime": "2020-04-09T14:49:19+00:00",
                    "issued": "2020-04-09T14:49:19.202+00:00",
                    "valueQuantity": {
                        "value": 4.17096638750904,
                        "unit": "10*3/uL",
                        "system": "http://unitsofmeasure.org",
                        "code": "10*3/uL"
                    }
                },
                "search": {
                    "mode": "match"
                },
                "response": {
                    "status": "200 OK",
                    "etag": "W/\"4\""
                }
            }
        ]
    }
    return jsonify(dict)






@app.route("/", methods=["POST", "GET"])
@cross_origin()
def index():

    data = request.json
    prrocessed_data = process_input(data, map_dict)
    prrocessed_data = map_concept_codes(prrocessed_data, map_dict)
    obser_pred_wins = determine_observ_predict_windows(prrocessed_data)  # Determine observation and prediction windows
    represantation_data = extract_representations(prrocessed_data, map_dict, obser_pred_wins)

    net = models.get(obser_pred_wins["obser_max"], None)
    if net is None:
        inference_data = {'preds': "No model available to predict for patients at this age."}
    else:
        inference_data = inference(represantation_data, net, obser_pred_wins["obser_max"])

    anthropometric_data = extract_anthropometric_data(prrocessed_data, obser_pred_wins["obser_max"]) # BMI during the ages
    ehr_history = extract_ehr_history(prrocessed_data, obser_pred_wins["obser_max"] * 12)
    age_l = [x / 12 for x in anthropometric_data['bmi_x']]
    # print(age_l, anthropometric_data['bmi_y'])
    buf = plot_bmi_percentiles(age_l, anthropometric_data['bmi_y'], sex=1)

    response_dict = {}
    # print(data['patient']['name'][0])
    pop3 = '''<a href="./popup3.html?name='''+data['patient']['name'][0]['given'][0]+'''" target="_blank">
            <img src="assets/icon/info.png" alt="Button Image" height="25px"
            style="margin-bottom: 10px; margin-left: 10px;">
    </a>'''
    response_dict['img' ] = buf
    response_dict['pop3'] = pop3
    response_dict['name'] = "<b>Name: </b>"+ data['patient']['name'][0]['given'][0] + " " + data['patient']['name'][0]['family']
    response_dict['dob'] = "<b>DOB: </b>" + data['patient']['birthDate']
    response_dict['result'] = inference_data['preds']
    response_dict['risk'] = ehr_history['moc_data']
    #########################################################################
    return jsonify(response_dict)


if __name__ == '__main__':
    port = int(os.environ.get('PORT', 4000))
    if DEBUG:
        app.run(debug=True, host='0.0.0.0', port=port)
    else:
        app.run(debug=True, host='0.0.0.0', port=port, ssl_context=('./key/cert.pem', './key/key.pem'))
