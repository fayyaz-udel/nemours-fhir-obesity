<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Nemours FHIR Obesity</title>
    <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
    <script type="text/javascript" src="\js\functions.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="\css\style.css">

</head>


<body>

<nav class="navbar bg-primary" style="margin-bottom: 2vh">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1 text-white">Nemours FHIR Obesity</span>
    </div>
</nav>


<div class="container">
    <h4>Demographics</h4>
    <table>
        <tr>
            <td>First Name</td>
            <td id="p_first_name"></td>
        </tr>

        <tr>
            <td>Last Name</td>
            <td id="p_last_name"></td>
        </tr>
        <tr>
            <td>DOB</td>
            <td id="p_dob"></td>
        </tr>

        <tr>
            <td>Gender</td>
            <td id="p_gender"></td>
        </tr>
    </table>
    <hr>
    <h4 id="cond_head">Conditions</h4>
    <hr>
    <h4 id="obsrv_head">Observations</h4>
    <div id="obrvs"></div>
    <hr>
    <h4 id="med_head">Medications</h4>
    <div id="meds"></div>
    <hr>
    <h4 id="pred_head">Predictions</h4>
    <div id="preds"></div>

    <div style="width: 500pt; margin: auto">
        <canvas id="myChart"></canvas>
    </div>


    <script type="text/javascript">

        get_demographic().then(function (pt) {
            get_meds().then(function (med) {
                get_conds().then(function (cond) {
                    get_obsrvs().then(function (obsrv) {
                        data = {
                            'patient': pt,
                            'medications': med,
                            'conditions': cond,
                            'observations': obsrv
                        }
                        get_preds(data);
                    })
                })
            });


        }).catch(function (error) {
            console.error('An error occurred:', error);
        });
        get_conds();
        get_obsrvs();

        draw_chart();

    </script>
</div>
</body>
</html>
